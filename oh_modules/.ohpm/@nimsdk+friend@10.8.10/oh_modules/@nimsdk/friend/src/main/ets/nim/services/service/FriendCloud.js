import { get } from '@nimsdk/vendor'; import { AddFriendRequest, DeleteFriendRequest, IncFriendInfoRequest, SetFriendInfoRequest } from './cloud/FriendRequest'; import { V2NIMFriendImpl } from './V2NIMFriendImpl'; class SetFriendInfoParams { constructor(b1, c1, d1) { this.accountId = b1; this.alias = c1; this.serverExtension = d1; } } export class FriendCloud { constructor(a1) { this.core = a1; } async addFriend(x, y, z = '') { await this.core.sendCmd('v2AddFriend', new AddFriendRequest(x, y, z)); } async deleteFriend(v, w) { await this.core.sendCmd('v2DeleteFriend', new DeleteFriendRequest(v, w)); } async getFriend(p) { const q = await this.core.sendCmd('v2IncFriendInfo', new IncFriendInfoRequest(p)); const r = get(q.content, 'friends'); const s = V2NIMFriendImpl.parseArrayFromCloud(r); const t = get(q.content, 'timetag'); const u = new Map(); u.set('friends', s); u.set('timetag', t); return u; } async setFriendInfo(m, n) { const o = new SetFriendInfoParams(m, n.alias, n.serverExtension); await this.core.sendCmd('v2SetFriendInfo', new SetFriendInfoRequest(o)); } } 