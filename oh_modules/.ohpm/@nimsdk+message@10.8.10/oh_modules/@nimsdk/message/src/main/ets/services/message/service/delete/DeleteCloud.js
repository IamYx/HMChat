import { get } from '@nimsdk/vendor/'; import { ClearHistoryMessageRequest, DeleteMessageExtend, DeleteMessageRequest, DeleteMessagesRequest } from '../../cloud/MessageRequest'; import { formatMessageRefer } from '../../utils/Format'; export class DeleteCloud { constructor(w52) { this.core = w52; } async delete(message, r52) { const s52 = formatMessageRefer(this.core, message); const t52 = new DeleteMessageExtend(s52); t52.serverExtension = r52; const u52 = await this.core.sendCmd('v2DeleteMessage', new DeleteMessageRequest(t52)); const v52 = get(u52, 'content.timetag'); return v52; } async deleteMessages(l52, m52) { const n52 = await this.core.sendCmd('v2DeleteMessages', new DeleteMessagesRequest(l52.map((item) => { const p52 = formatMessageRefer(this.core, item); const q52 = new DeleteMessageExtend(p52); q52.serverExtension = m52; return q52; }))); const o52 = get(n52, 'content.timetag'); return o52; } async clearHistoryMessage(option) { const k52 = (await this.core.sendCmd('v2ClearHistoryMessage', new ClearHistoryMessageRequest(option))); const timestamp = get(k52.content, 'timetag'); return timestamp; } } 