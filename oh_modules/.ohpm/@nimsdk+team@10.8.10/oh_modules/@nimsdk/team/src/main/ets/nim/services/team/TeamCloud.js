import { V2NIMTeamType } from '@nimsdk/base'; import { get } from '@nimsdk/vendor/Index'; import { TeamCreateRequest, TeamDismissRequest, TeamGetByIdsRequest, TeamGetInfoRequest, TeamLeaveRequest, TeamSetChatBannedModeRequest, TeamTransferOwnerRequest, TeamUpdateInfoRequest } from './cloud/TeamCloudRequest'; import { V2NIMTeamImpl } from './V2NIMTeamImpl'; export class TeamCloud { constructor(e23) { this.core = e23; } async createTeam(w22, x22, y22, z22) { y22 = y22 ?? ''; const cmd = w22.teamType === V2NIMTeamType.V2NIM_TEAM_TYPE_SUPER ? 'v2SuperTeamCreate' : 'v2TeamCreate'; const a23 = new TeamCreateRequest(w22, x22, y22, z22); const b23 = await this.core.sendCmd(cmd, a23); const c23 = get(b23.content, 'team'); const d23 = V2NIMTeamImpl.parseFromCloud(c23); d23.isValidTeam = true; d23.ownerAccountId = this.core.account; return { team: d23, failedList: get(b23.content, 'failedList') }; } async leaveTeam(t22, u22) { const cmd = u22 === V2NIMTeamType.V2NIM_TEAM_TYPE_SUPER ? 'v2SuperTeamLeave' : 'v2TeamLeave'; const v22 = new TeamLeaveRequest(t22); await this.core.sendCmd(cmd, v22); } async setTeamChatBannedMode(p22, q22, r22) { const cmd = q22 === V2NIMTeamType.V2NIM_TEAM_TYPE_SUPER ? 'v2SuperTeamSetChatBannedMode' : 'v2TeamSetChatBannedMode'; const s22 = new TeamSetChatBannedModeRequest(p22, r22); await this.core.sendCmd(cmd, s22); } async getTeamInfo(j22, k22) { const cmd = k22 === V2NIMTeamType.V2NIM_TEAM_TYPE_SUPER ? 'v2SuperTeamGetInfo' : 'v2TeamGetInfo'; const l22 = new TeamGetInfoRequest(j22); const m22 = (await this.core.sendCmd(cmd, l22)); const n22 = get(m22.content, 'team'); const o22 = V2NIMTeamImpl.parseFromCloud(n22); return o22; } async updateTeamInfo(e22, f22) { const cmd = e22.teamType === V2NIMTeamType.V2NIM_TEAM_TYPE_SUPER ? 'v2SuperTeamUpdateInfo' : 'v2TeamUpdateInfo'; const g22 = new TeamUpdateInfoRequest(e22, f22); const h22 = (await this.core.sendCmd(cmd, g22)); const i22 = get(h22.content, 'timestamp'); return i22; } async transferTeamOwner(a22, b22, accountId, c22) { const cmd = b22 === V2NIMTeamType.V2NIM_TEAM_TYPE_SUPER ? 'v2SuperTeamTransferOwner' : 'v2TeamTransferOwner'; const d22 = new TeamTransferOwnerRequest(a22, accountId, c22 || false); await this.core.sendCmd(cmd, d22); } async dismissTeam(x21, y21) { const cmd = y21 === V2NIMTeamType.V2NIM_TEAM_TYPE_SUPER ? 'v2SuperTeamDismiss' : 'v2TeamDismiss'; const z21 = new TeamDismissRequest(x21); await this.core.sendCmd(cmd, z21); } async getTeamInfoByIds(s21, t21) { const cmd = t21 === V2NIMTeamType.V2NIM_TEAM_TYPE_SUPER ? 'v2SuperTeamGetByIds' : 'v2TeamGetByIds'; const request = new TeamGetByIdsRequest(s21); const u21 = await this.core.sendCmd(cmd, request); const v21 = get(u21.content, 'teams'); const w21 = V2NIMTeamImpl.parseArrayFromCloud(v21); return w21; } } 